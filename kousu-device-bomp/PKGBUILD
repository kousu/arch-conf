pkgname=kousu-device-bomp
pkgdesc="Configuration management for kousu's \"bomp\" laptop"
arch=('any')
url="https://github.com/kousu/arch-conf"

_pkgver() {
  [ -r "$startdir"/.pkgver ] && cat "$startdir"/.pkgver || (echo "r$(git rev-list --count HEAD).commit=$(git describe --always --dirty | sed s/-/+/g)")
}
pkgver="$(_pkgver)"
pkgrel=1

depends=(
  linux-firmware-intel
  kousu-desktop-i3
  kousu-work
  
  # Programming
  julia
)

optdepends=(
  kousu-art-audio
)

conflicts=(kousu-device-allium kousu-device-nigiri)

backup=(
  # user-changeable config files
  etc/mkinitcpio.d/linux.preset
)

package() {
  cd "${startdir}/src/"   # instead of prepare() { cp "${startdir}/src/." "${srcdir}" }

  cp -rp * "${pkgdir}"
}
